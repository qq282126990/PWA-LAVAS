<html>
<head>
<title>AppHeader.vue</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.ln { color: #2b91af; font-weight: normal; font-style: normal; }
.s0 { color: rgb(218,218,218); }
.s1 { color: rgb(249,38,114); font-weight: bold; }
.s2 { color: rgb(218,218,218); }
.s3 { color: rgb(166,226,46); font-weight: bold; }
.s4 { color: rgb(230,219,116); font-weight: bold; }
.s5 { color: rgb(214,157,133); }
.s6 { color: rgb(86,156,214); }
.s7 { color: rgb(96,139,78); }
.s8 { color: rgb(96,139,78); font-weight: bold; }
.s9 { color: rgb(249,38,114); font-weight: bold; }
.s10 { color: rgb(230,219,116); font-weight: bold; }
.s11 { color: rgb(102,14,122); font-weight: bold; }
.s12 { color: rgb(255,179,179); font-weight: bold; }
.s13 { color: rgb(102,217,239); font-style: italic; }
.s14 { color: rgb(174,129,255); }
.s15 { color: rgb(128,128,128); font-style: italic; }
</style>
</head>
<BODY BGCOLOR="#1e1e1e">
<TABLE CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<TR><TD><CENTER>
<FONT FACE="Arial, Helvetica" COLOR="#000000">
AppHeader.vue</FONT>
</center></TD></TR></TABLE>
<pre>
<span class="s0">&lt;</span><span class="s1">template</span><span class="s0">&gt;</span><span class="s2"> 
    </span><span class="s0">&lt;</span><span class="s1">transition</span><span class="s0"> 
        </span><span class="s3">name=</span><span class="s4">&quot;slide-down&quot;</span><span class="s0">&gt;</span><span class="s2"> 
        </span><span class="s0">&lt;</span><span class="s1">header </span><span class="s3">class=</span><span class="s4">&quot;app-header-wrapper&quot; </span><span class="s3">v-show=</span><span class="s4">&quot;</span><span class="s2">show</span><span class="s4">&quot;</span><span class="s0">&gt;</span><span class="s2"> 
            </span><span class="s0">&lt;</span><span class="s1">div </span><span class="s3">class=</span><span class="s4">&quot;app-header-left&quot;</span><span class="s0">&gt;</span><span class="s2"> 
                </span><span class="s0">&lt;</span><span class="s1">v-btn</span><span class="s0"> 
                    </span><span class="s3">icon</span><span class="s0"> 
                    </span><span class="s3">v-if=</span><span class="s4">&quot;</span><span class="s2">showMenu</span><span class="s4">&quot;</span><span class="s0"> 
                    </span><span class="s3">@click.native=</span><span class="s4">&quot;</span><span class="s2">handleClick(</span><span class="s5">'menu'</span><span class="s2">)</span><span class="s4">&quot;</span><span class="s0">&gt;</span><span class="s2"> 
                    </span><span class="s0">&lt;</span><span class="s1">v-icon </span><span class="s3">color=</span><span class="s4">&quot;white&quot; </span><span class="s3">class=</span><span class="s4">&quot;app-header-icon&quot;</span><span class="s0">&gt;</span><span class="s2">person_outline 
                    </span><span class="s0">&lt;/</span><span class="s1">v-icon</span><span class="s0">&gt;</span><span class="s2"> 
                </span><span class="s0">&lt;/</span><span class="s1">v-btn</span><span class="s0">&gt;</span><span class="s2"> 
                </span><span class="s0">&lt;</span><span class="s1">v-btn</span><span class="s0"> 
                    </span><span class="s3">icon</span><span class="s0"> 
                    </span><span class="s3">v-if=</span><span class="s4">&quot;</span><span class="s2">showBack</span><span class="s4">&quot;</span><span class="s0"> 
                    </span><span class="s3">@click.native=</span><span class="s4">&quot;</span><span class="s2">handleClick(</span><span class="s5">'back'</span><span class="s2">)</span><span class="s4">&quot;</span><span class="s0">&gt;</span><span class="s2"> 
                    </span><span class="s0">&lt;</span><span class="s1">v-icon </span><span class="s3">color=</span><span class="s4">&quot;white&quot; </span><span class="s3">class=</span><span class="s4">&quot;app-header-icon&quot;</span><span class="s0">&gt;</span><span class="s2">arrow_back</span><span class="s0">&lt;/</span><span class="s1">v-icon</span><span class="s0">&gt;</span><span class="s2"> 
                </span><span class="s0">&lt;/</span><span class="s1">v-btn</span><span class="s0">&gt;</span><span class="s2"> 
                </span><span class="s0">&lt;</span><span class="s1">div </span><span class="s3">v-if=</span><span class="s4">&quot;</span><span class="s2">showLogo</span><span class="s4">&quot; </span><span class="s3">@click=</span><span class="s4">&quot;</span><span class="s2">handleClick(</span><span class="s5">'logo'</span><span class="s2">)</span><span class="s4">&quot;</span><span class="s0">&gt;</span><span class="s2"> 
                    </span><span class="s0">&lt;</span><span class="s1">slot </span><span class="s3">name=</span><span class="s4">&quot;logo&quot;</span><span class="s0">&gt;</span><span class="s2"> 
                        </span><span class="s0">&lt;</span><span class="s1">img </span><span class="s3">v-if=</span><span class="s4">&quot;</span><span class="s2">logoIcon.src</span><span class="s4">&quot; </span><span class="s3">:src=</span><span class="s4">&quot;</span><span class="s2">logoIcon.src</span><span class="s4">&quot; </span><span class="s3">:alt=</span><span class="s4">&quot;</span><span class="s2">logoIcon.alt</span><span class="s4">&quot; </span><span class="s3">class=</span><span class="s4">&quot;app-header-icon&quot;</span><span class="s0">&gt;&lt;/</span><span class="s1">img</span><span class="s0">&gt;</span><span class="s2"> 
                    </span><span class="s0">&lt;/</span><span class="s1">slot</span><span class="s0">&gt;</span><span class="s2"> 
                </span><span class="s0">&lt;/</span><span class="s1">div</span><span class="s0">&gt;</span><span class="s2"> 
            </span><span class="s0">&lt;/</span><span class="s1">div</span><span class="s0">&gt;</span><span class="s2"> 
            </span><span class="s0">&lt;</span><span class="s1">div </span><span class="s3">class=</span><span class="s4">&quot;app-header-middle&quot; </span><span class="s3">v-cloak</span><span class="s0">&gt;</span><span class="s2"> 
                </span><span class="s0">&lt;</span><span class="s1">slot </span><span class="s3">name=</span><span class="s4">&quot;title&quot;</span><span class="s0">&gt;</span><span class="s2"> 
                    {{ title }} 
                </span><span class="s0">&lt;/</span><span class="s1">slot</span><span class="s0">&gt;</span><span class="s2"> 
            </span><span class="s0">&lt;/</span><span class="s1">div</span><span class="s0">&gt;</span><span class="s2"> 
            </span><span class="s0">&lt;</span><span class="s1">div </span><span class="s3">class=</span><span class="s4">&quot;app-header-right&quot;</span><span class="s0">&gt;</span><span class="s2"> 
                </span><span class="s0">&lt;</span><span class="s1">slot </span><span class="s3">name=</span><span class="s4">&quot;actions&quot;</span><span class="s0"> 
                    </span><span class="s3">v-for=</span><span class="s4">&quot;</span><span class="s2">(action, actionIdx) in actions</span><span class="s4">&quot;</span><span class="s0"> 
                    </span><span class="s3">:icon=</span><span class="s4">&quot;</span><span class="s2">action.icon</span><span class="s4">&quot;</span><span class="s0"> 
                    </span><span class="s3">:route=</span><span class="s4">&quot;</span><span class="s2">action.route</span><span class="s4">&quot;</span><span class="s0">&gt;</span><span class="s2"> 
                    </span><span class="s0">&lt;</span><span class="s1">v-btn</span><span class="s0"> 
                        </span><span class="s3">icon=</span><span class="s4">&quot;icon&quot;</span><span class="s0"> 
                        </span><span class="s3">@click.native=</span><span class="s4">&quot;</span><span class="s2">handleClick(</span><span class="s5">'action'</span><span class="s2">, {actionIdx, route: action.route})</span><span class="s4">&quot;</span><span class="s0">&gt;</span><span class="s2"> 
                        </span><span class="s0">&lt;</span><span class="s1">v-icon </span><span class="s3">color=</span><span class="s4">&quot;white&quot; </span><span class="s3">v-if=</span><span class="s4">&quot;</span><span class="s2">action.icon</span><span class="s4">&quot; </span><span class="s3">class=</span><span class="s4">&quot;app-header-icon&quot;</span><span class="s0">&gt;</span><span class="s2">{{ action.icon }}</span><span class="s0">&lt;/</span><span class="s1">v-icon</span><span class="s0">&gt;</span><span class="s2"> 
                    </span><span class="s0">&lt;/</span><span class="s1">v-btn</span><span class="s0">&gt;</span><span class="s2"> 
                </span><span class="s0">&lt;/</span><span class="s1">slot</span><span class="s0">&gt;</span><span class="s2"> 
            </span><span class="s0">&lt;/</span><span class="s1">div</span><span class="s0">&gt;</span><span class="s2"> 
        </span><span class="s0">&lt;/</span><span class="s1">header</span><span class="s0">&gt;</span><span class="s2"> 
    </span><span class="s0">&lt;/</span><span class="s1">transition</span><span class="s0">&gt;</span><span class="s2"> 
</span><span class="s0">&lt;/</span><span class="s1">template</span><span class="s0">&gt;</span><span class="s2"> 
 
</span><span class="s0">&lt;</span><span class="s1">script</span><span class="s0">&gt;</span><span class="s2"> 
</span><span class="s6">import </span><span class="s2">{mapState} </span><span class="s6">from </span><span class="s5">'vuex'</span><span class="s2">; 
</span><span class="s6">import </span><span class="s2">EventBus </span><span class="s6">from </span><span class="s5">'@/core/event-bus'</span><span class="s2">; 
 
</span><span class="s6">export default </span><span class="s2">{ 
    name: </span><span class="s5">'appHeader'</span><span class="s2">, 
    computed: { 
        ...mapState(</span><span class="s5">'appShell/appHeader'</span><span class="s2">, [ 
            </span><span class="s5">'show'</span><span class="s2">, 
            </span><span class="s5">'showMenu'</span><span class="s2">, 
            </span><span class="s5">'showBack'</span><span class="s2">, 
            </span><span class="s5">'showLogo'</span><span class="s2">, 
            </span><span class="s5">'logoIcon'</span><span class="s2">, 
            </span><span class="s5">'title'</span><span class="s2">, 
            </span><span class="s5">'actions'</span><span class="s2"> 
        ]), 
        ...mapState(</span><span class="s5">'appShell/common'</span><span class="s2">, [ 
            </span><span class="s5">'isPageSwitching'</span><span class="s2"> 
        ]) 
    }, 
    methods: { 
 
        </span><span class="s7">/** 
         * 处理按钮点击事件 
         * 
         * </span><span class="s8">@param </span><span class="s7">{string} source 点击事件源名称 menu/logo/action 
         * </span><span class="s8">@param </span><span class="s7">{Object} data 随点击事件附带的数据对象 
         */</span><span class="s2"> 
        handleClick(source, {actionIdx, route} = {}) { 
 
            </span><span class="s7">// 页面正在切换中，不允许操作，防止滑动效果进行中切换</span><span class="s2"> 
            </span><span class="s6">if </span><span class="s2">(</span><span class="s6">this</span><span class="s2">.isPageSwitching) { 
                </span><span class="s6">return</span><span class="s2">; 
            } 
            </span><span class="s6">let </span><span class="s2">eventData = {}; 
 
            </span><span class="s7">// 点击右侧动作按钮，事件对象中附加序号</span><span class="s2"> 
            </span><span class="s6">if </span><span class="s2">(source === </span><span class="s5">'action'</span><span class="s2">) { 
                eventData.actionIdx = actionIdx; 
            } 
 
            </span><span class="s7">// 发送给父组件，内部处理</span><span class="s2"> 
            </span><span class="s6">this</span><span class="s2">.$emit(</span><span class="s5">`click-</span><span class="s2">${source}</span><span class="s5">`</span><span class="s2">, eventData); 
 
            </span><span class="s7">// 发送全局事件，便于非父子关系的路由组件监听</span><span class="s2"> 
            EventBus.$emit(</span><span class="s5">`app-header:click-</span><span class="s2">${source}</span><span class="s5">`</span><span class="s2">, eventData); 
 
            </span><span class="s7">// 如果传递了路由对象，进入路由</span><span class="s2"> 
            </span><span class="s6">if </span><span class="s2">(route) { 
                </span><span class="s6">this</span><span class="s2">.$router.push(route); 
            } 
        } 
    } 
}; 
</span><span class="s0">&lt;/</span><span class="s1">script</span><span class="s0">&gt;</span><span class="s2"> 
 
</span><span class="s0">&lt;</span><span class="s1">style </span><span class="s3">lang=</span><span class="s4">&quot;stylus&quot; </span><span class="s3">scoped</span><span class="s0">&gt;</span><span class="s2"> 
</span><span class="s9">@require </span><span class="s10">'~@/assets/stylus/variable'</span><span class="s2"> 
</span><span class="s11">$btn-color </span><span class="s2">= </span><span class="s12">#fff</span><span class="s2"> 
 
.</span><span class="s12">app-header-wrapper</span><span class="s2"> 
    </span><span class="s13">display </span><span class="s12">flex</span><span class="s2"> 
    </span><span class="s13">justify-content </span><span class="s12">space-between</span><span class="s2"> 
    </span><span class="s13">align-items </span><span class="s12">center</span><span class="s2"> 
    </span><span class="s13">width </span><span class="s14">100</span><span class="s12">vw</span><span class="s2"> 
    </span><span class="s13">height </span><span class="s11">$app-header-height</span><span class="s2"> 
    </span><span class="s13">background </span><span class="s12">#5929cb</span><span class="s2"> 
    </span><span class="s13">color </span><span class="s11">$btn-color</span><span class="s2"> 
    </span><span class="s13">padding </span><span class="s14">0</span><span class="s2"> 
    </span><span class="s13">box-shadow </span><span class="s14">0 2</span><span class="s12">px </span><span class="s14">4</span><span class="s12">px </span><span class="s2">-</span><span class="s14">1</span><span class="s12">px rgba</span><span class="s2">(</span><span class="s14">0</span><span class="s2">,</span><span class="s14">0</span><span class="s2">,</span><span class="s14">0</span><span class="s2">,</span><span class="s14">.2</span><span class="s2">), </span><span class="s14">0 4</span><span class="s12">px </span><span class="s14">5</span><span class="s12">px rgba</span><span class="s2">(</span><span class="s14">0</span><span class="s2">,</span><span class="s14">0</span><span class="s2">,</span><span class="s14">0</span><span class="s2">,</span><span class="s14">.14</span><span class="s2">), </span><span class="s14">0 1</span><span class="s12">px </span><span class="s14">10</span><span class="s12">px rgba</span><span class="s2">(</span><span class="s14">0</span><span class="s2">,</span><span class="s14">0</span><span class="s2">,</span><span class="s14">0</span><span class="s2">,</span><span class="s14">.12</span><span class="s2">) 
    </span><span class="s13">transition </span><span class="s12">transform </span><span class="s14">0.3</span><span class="s12">s ease-out</span><span class="s2"> 
 
    </span><span class="s12">&amp;</span><span class="s2">.</span><span class="s12">slide-down-enter</span><span class="s2">, 
    </span><span class="s12">&amp;</span><span class="s2">.</span><span class="s12">slide-down-leave-to</span><span class="s2"> 
        </span><span class="s13">transform </span><span class="s12">translate</span><span class="s2">(</span><span class="s14">0</span><span class="s2">, -</span><span class="s14">100</span><span class="s2">%) 
 
    </span><span class="s12">&amp; </span><span class="s2">&gt; </span><span class="s12">div</span><span class="s2"> 
        </span><span class="s13">display </span><span class="s12">flex</span><span class="s2"> 
        </span><span class="s13">align-items </span><span class="s12">center</span><span class="s2"> 
 
    .</span><span class="s12">app-header-middle</span><span class="s2"> 
        </span><span class="s13">flex </span><span class="s14">1</span><span class="s2"> 
        </span><span class="s13">font-size </span><span class="s14">1.2</span><span class="s12">em</span><span class="s2"> 
 
    </span><span class="s15">// 改变 icon 大小</span><span class="s2"> 
    .</span><span class="s12">app-header-icon</span><span class="s2"> 
        </span><span class="s13">color </span><span class="s11">$btn-color</span><span class="s2"> 
        </span><span class="s13">width </span><span class="s14">40</span><span class="s12">px</span><span class="s2"> 
        </span><span class="s13">height </span><span class="s14">40</span><span class="s12">px</span><span class="s2"> 
</span><span class="s0">&lt;/</span><span class="s1">style</span><span class="s0">&gt;</span><span class="s2"> 
</span></pre>
</body>
</html>